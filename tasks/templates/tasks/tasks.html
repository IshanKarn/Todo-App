{% extends "base.html" %}
{% block heading %}My Tasks{% endblock %}

{% block content %}

<!-- CREATE TASK -->
<h3>Create Task</h3>
<form method="post">
  {% csrf_token %}
  
  <input name="title" placeholder="Title" required><br><br>
  <textarea name="description" placeholder="Description"></textarea><br><br>
  <input type="date" name="due_date"><br><br>

  <button>Create Task</button>
</form>

<hr>

<!-- TASK LIST -->
<h3>Your Tasks</h3>

<ul>
  {% for task in tasks %}
    <li style="margin-bottom:15px;">

      <!-- UPDATE TASK -->
      <form method="post" action="/tasks/update/{{ task.id }}/">
        {% csrf_token %}

        <input name="title" value="{{ task.title }}" required>
        <br>

        <textarea name="description">{{ task.description }}</textarea>
        <br>

        <select name="status">
          <option value="pending" {% if task.status == "pending" %}selected{% endif %}>Pending</option>
          <option value="completed" {% if task.status == "completed" %}selected{% endif %}>Completed</option>
        </select>

        <button>Update</button>
      </form>

      <!-- DELETE TASK -->
      <form
        action="/tasks/delete/{{ task.id }}/"
        method="post"
        style="display:inline;"
        onsubmit="return confirm('Are you sure you want to delete this task?');"
      >
        {% csrf_token %}
        <button style="margin-top:5px;">Delete</button>
      </form>

    </li>
  {% empty %}
    <li>No tasks yet.</li>
  {% endfor %}
</ul>

{% endblock %}
